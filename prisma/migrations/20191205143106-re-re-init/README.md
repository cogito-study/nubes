# Migration `20191205143106-re-re-init`

This migration has been generated by kiralybalint <balint.kiraly@cogito.study> at 12/5/2019, 2:31:06 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."Department" (
  "createdAt" timestamp(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  "deletedAt" timestamp(3)   ,
  "description" text NOT NULL DEFAULT '' ,
  "id" text NOT NULL  ,
  "name" text NOT NULL DEFAULT '' ,
  "updatedAt" timestamp(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  PRIMARY KEY ("id")
);

CREATE TABLE "public"."Faculty" (
  "createdAt" timestamp(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  "deletedAt" timestamp(3)   ,
  "id" text NOT NULL  ,
  "name" text NOT NULL DEFAULT '' ,
  "updatedAt" timestamp(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  PRIMARY KEY ("id")
);

CREATE TABLE "public"."Institute" (
  "createdAt" timestamp(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  "deletedAt" timestamp(3)   ,
  "id" text NOT NULL  ,
  "name" text NOT NULL DEFAULT '' ,
  "updatedAt" timestamp(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  PRIMARY KEY ("id")
);

CREATE TABLE "public"."Language" (
  "code" text NOT NULL DEFAULT '' ,
  "id" text NOT NULL  ,
  "name" text NOT NULL DEFAULT '' ,
  PRIMARY KEY ("id")
);

CREATE TABLE "public"."Major" (
  "createdAt" timestamp(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  "deletedAt" timestamp(3)   ,
  "id" text NOT NULL  ,
  "name" text NOT NULL DEFAULT '' ,
  "updatedAt" timestamp(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  PRIMARY KEY ("id")
);

CREATE TABLE "public"."Note" (
  "content" text NOT NULL DEFAULT '' ,
  "contentHTML" text NOT NULL DEFAULT '' ,
  "createdAt" timestamp(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  "deletedAt" timestamp(3)   ,
  "description" text   ,
  "id" text NOT NULL  ,
  "noteCategory" text NOT NULL DEFAULT 'NOTE' ,
  "number" integer NOT NULL DEFAULT 0 ,
  "title" text NOT NULL DEFAULT '' ,
  "updatedAt" timestamp(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  PRIMARY KEY ("id")
);

CREATE TABLE "public"."NoteComment" (
  "content" text NOT NULL DEFAULT '' ,
  "createdAt" timestamp(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  "deletedAt" timestamp(3)   ,
  "id" text NOT NULL  ,
  "updatedAt" timestamp(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  PRIMARY KEY ("id")
);

CREATE TABLE "public"."NoteCommentThread" (
  "createdAt" timestamp(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  "deletedAt" timestamp(3)   ,
  "id" text NOT NULL  ,
  "position" text NOT NULL DEFAULT '' ,
  "updatedAt" timestamp(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  PRIMARY KEY ("id")
);

CREATE TABLE "public"."NoteHighlight" (
  "createdAt" timestamp(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  "deletedAt" timestamp(3)   ,
  "id" text NOT NULL  ,
  "position" text NOT NULL DEFAULT '' ,
  "updatedAt" timestamp(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  PRIMARY KEY ("id")
);

CREATE TABLE "public"."PasswordToken" (
  "createdAt" timestamp(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  "deletedAt" timestamp(3)   ,
  "id" text NOT NULL  ,
  "token" text NOT NULL DEFAULT '' ,
  "updatedAt" timestamp(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  PRIMARY KEY ("id")
);

CREATE TABLE "public"."Subject" (
  "code" text NOT NULL DEFAULT '' ,
  "createdAt" timestamp(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  "deletedAt" timestamp(3)   ,
  "description" text NOT NULL DEFAULT '' ,
  "id" text NOT NULL  ,
  "name" text NOT NULL DEFAULT '' ,
  "updatedAt" timestamp(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  PRIMARY KEY ("id")
);

CREATE TABLE "public"."SubjectInformation" (
  "content" text NOT NULL DEFAULT '' ,
  "createdAt" timestamp(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  "deletedAt" timestamp(3)   ,
  "id" text NOT NULL  ,
  "subtitle" text   ,
  "title" text NOT NULL DEFAULT '' ,
  "updatedAt" timestamp(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  PRIMARY KEY ("id")
);

CREATE TABLE "public"."Suggestion" (
  "approvedAt" timestamp(3)   ,
  "createdAt" timestamp(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  "deletedAt" timestamp(3)   ,
  "delta" text NOT NULL DEFAULT '' ,
  "id" text NOT NULL  ,
  "rejectedAt" timestamp(3)   ,
  "updatedAt" timestamp(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  PRIMARY KEY ("id")
);

CREATE TABLE "public"."User" (
  "createdAt" timestamp(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  "deletedAt" timestamp(3)   ,
  "email" text NOT NULL DEFAULT '' ,
  "firstName" text NOT NULL DEFAULT '' ,
  "id" text NOT NULL  ,
  "identifier" text NOT NULL DEFAULT '' ,
  "isActive" boolean NOT NULL DEFAULT false ,
  "lastName" text NOT NULL DEFAULT '' ,
  "password" text NOT NULL DEFAULT '' ,
  "phoneNumber" text   ,
  "position" text   ,
  "profilePictureURL" text   ,
  "updatedAt" timestamp(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  PRIMARY KEY ("id")
);

CREATE TABLE "public"."Post" (
  "content" text NOT NULL DEFAULT '' ,
  "createdAt" timestamp(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  "deletedAt" timestamp(3)   ,
  "id" text NOT NULL  ,
  "updatedAt" timestamp(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  PRIMARY KEY ("id")
);

CREATE TABLE "public"."PostComment" (
  "content" text NOT NULL DEFAULT '' ,
  "createdAt" timestamp(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  "deletedAt" timestamp(3)   ,
  "id" text NOT NULL  ,
  "updatedAt" timestamp(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  PRIMARY KEY ("id")
);

CREATE TABLE "public"."ActivationToken" (
  "createdAt" timestamp(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  "id" text NOT NULL  ,
  "token" text NOT NULL DEFAULT '' ,
  PRIMARY KEY ("id")
);

CREATE TABLE "public"."ResetPasswordToken" (
  "createdAt" timestamp(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  "email" text NOT NULL  ,
  "token" text NOT NULL DEFAULT '' ,
  PRIMARY KEY ("email")
);

CREATE TABLE "public"."UserRole" (
  "createdAt" timestamp(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  "deletedAt" timestamp(3)   ,
  "id" text NOT NULL  ,
  "name" text NOT NULL DEFAULT '' ,
  "type" text NOT NULL DEFAULT 'USER' ,
  "updatedAt" timestamp(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  PRIMARY KEY ("id")
);

CREATE TABLE "public"."DepartmentPermission" (
  "createdAt" timestamp(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  "deletedAt" timestamp(3)   ,
  "id" text NOT NULL  ,
  "type" text NOT NULL DEFAULT 'UPDATE_DEPARTMENT' ,
  "updatedAt" timestamp(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  PRIMARY KEY ("id")
);

CREATE TABLE "public"."FacultyPermission" (
  "createdAt" timestamp(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  "deletedAt" timestamp(3)   ,
  "id" text NOT NULL  ,
  "type" text NOT NULL DEFAULT 'UPDATE_FACULTY' ,
  "updatedAt" timestamp(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  PRIMARY KEY ("id")
);

CREATE TABLE "public"."InstitutePermission" (
  "createdAt" timestamp(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  "deletedAt" timestamp(3)   ,
  "id" text NOT NULL  ,
  "type" text NOT NULL DEFAULT 'UPDATE_INSTITUTE' ,
  "updatedAt" timestamp(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  PRIMARY KEY ("id")
);

CREATE TABLE "public"."MajorPermission" (
  "createdAt" timestamp(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  "deletedAt" timestamp(3)   ,
  "id" text NOT NULL  ,
  "type" text NOT NULL DEFAULT 'UPDATE_MAJOR' ,
  "updatedAt" timestamp(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  PRIMARY KEY ("id")
);

CREATE TABLE "public"."NoteCommentPermission" (
  "createdAt" timestamp(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  "deletedAt" timestamp(3)   ,
  "id" text NOT NULL  ,
  "type" text NOT NULL DEFAULT 'UPDATE_NOTE_COMMENT' ,
  "updatedAt" timestamp(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  PRIMARY KEY ("id")
);

CREATE TABLE "public"."NoteCommentThreadPermission" (
  "createdAt" timestamp(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  "deletedAt" timestamp(3)   ,
  "id" text NOT NULL  ,
  "type" text NOT NULL DEFAULT 'DELETE_NOTE_COMMENT_THREAD' ,
  "updatedAt" timestamp(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  PRIMARY KEY ("id")
);

CREATE TABLE "public"."NoteHighlightPermission" (
  "createdAt" timestamp(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  "deletedAt" timestamp(3)   ,
  "id" text NOT NULL  ,
  "type" text NOT NULL DEFAULT 'UPDATE_NOTE_HIGHLIGHT' ,
  "updatedAt" timestamp(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  PRIMARY KEY ("id")
);

CREATE TABLE "public"."NotePermission" (
  "createdAt" timestamp(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  "deletedAt" timestamp(3)   ,
  "id" text NOT NULL  ,
  "type" text NOT NULL DEFAULT 'READ_NOTE' ,
  "updatedAt" timestamp(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  PRIMARY KEY ("id")
);

CREATE TABLE "public"."PostCommentPermission" (
  "createdAt" timestamp(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  "deletedAt" timestamp(3)   ,
  "id" text NOT NULL  ,
  "type" text NOT NULL DEFAULT 'UPDATE_POSTCOMMENT' ,
  "updatedAt" timestamp(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  PRIMARY KEY ("id")
);

CREATE TABLE "public"."PostPermission" (
  "createdAt" timestamp(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  "deletedAt" timestamp(3)   ,
  "id" text NOT NULL  ,
  "type" text NOT NULL DEFAULT 'CREATE_POSTCOMMENT' ,
  "updatedAt" timestamp(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  PRIMARY KEY ("id")
);

CREATE TABLE "public"."SubjectPermission" (
  "createdAt" timestamp(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  "deletedAt" timestamp(3)   ,
  "id" text NOT NULL  ,
  "type" text NOT NULL DEFAULT 'CREATE_POST' ,
  "updatedAt" timestamp(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  PRIMARY KEY ("id")
);

CREATE TABLE "public"."SubjectInformationPermission" (
  "createdAt" timestamp(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  "deletedAt" timestamp(3)   ,
  "id" text NOT NULL  ,
  "type" text NOT NULL DEFAULT 'READ_SUBJECT_INFORMATION' ,
  "updatedAt" timestamp(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  PRIMARY KEY ("id")
);

CREATE TABLE "public"."SuggestionPermission" (
  "createdAt" timestamp(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  "deletedAt" timestamp(3)   ,
  "id" text NOT NULL  ,
  "type" text NOT NULL DEFAULT 'UPDATE_SUGGESTION' ,
  "updatedAt" timestamp(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  PRIMARY KEY ("id")
);

CREATE TABLE "public"."UserPermission" (
  "createdAt" timestamp(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  "deletedAt" timestamp(3)   ,
  "id" text NOT NULL  ,
  "type" text NOT NULL DEFAULT 'UPDATE_USER' ,
  "updatedAt" timestamp(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  PRIMARY KEY ("id")
);

CREATE TABLE "public"."_InstituteUsers" (
  "A" text NOT NULL  REFERENCES "public"."Institute"("id") ON DELETE CASCADE,
  "B" text NOT NULL  REFERENCES "public"."User"("id") ON DELETE CASCADE
);

CREATE TABLE "public"."_MajorSubjects" (
  "A" text NOT NULL  REFERENCES "public"."Major"("id") ON DELETE CASCADE,
  "B" text NOT NULL  REFERENCES "public"."Subject"("id") ON DELETE CASCADE
);

CREATE TABLE "public"."_NoteAuthors" (
  "A" text NOT NULL  REFERENCES "public"."Note"("id") ON DELETE CASCADE,
  "B" text NOT NULL  REFERENCES "public"."User"("id") ON DELETE CASCADE
);

CREATE TABLE "public"."_NoteLikers" (
  "A" text NOT NULL  REFERENCES "public"."Note"("id") ON DELETE CASCADE,
  "B" text NOT NULL  REFERENCES "public"."User"("id") ON DELETE CASCADE
);

CREATE TABLE "public"."_NoteCommentLikers" (
  "A" text NOT NULL  REFERENCES "public"."NoteComment"("id") ON DELETE CASCADE,
  "B" text NOT NULL  REFERENCES "public"."User"("id") ON DELETE CASCADE
);

CREATE TABLE "public"."_SubjectTeachers" (
  "A" text NOT NULL  REFERENCES "public"."Subject"("id") ON DELETE CASCADE,
  "B" text NOT NULL  REFERENCES "public"."User"("id") ON DELETE CASCADE
);

CREATE TABLE "public"."_SubjectStudents" (
  "A" text NOT NULL  REFERENCES "public"."Subject"("id") ON DELETE CASCADE,
  "B" text NOT NULL  REFERENCES "public"."User"("id") ON DELETE CASCADE
);

CREATE TABLE "public"."_SuggestionLikers" (
  "A" text NOT NULL  REFERENCES "public"."Suggestion"("id") ON DELETE CASCADE,
  "B" text NOT NULL  REFERENCES "public"."User"("id") ON DELETE CASCADE
);

CREATE TABLE "public"."_CommentLikers" (
  "A" text NOT NULL  REFERENCES "public"."PostComment"("id") ON DELETE CASCADE,
  "B" text NOT NULL  REFERENCES "public"."User"("id") ON DELETE CASCADE
);

CREATE TABLE "public"."_PostLikers" (
  "A" text NOT NULL  REFERENCES "public"."Post"("id") ON DELETE CASCADE,
  "B" text NOT NULL  REFERENCES "public"."User"("id") ON DELETE CASCADE
);

CREATE TABLE "public"."_DepartmentPermissionUsers" (
  "A" text NOT NULL  REFERENCES "public"."DepartmentPermission"("id") ON DELETE CASCADE,
  "B" text NOT NULL  REFERENCES "public"."User"("id") ON DELETE CASCADE
);

CREATE TABLE "public"."_FacultyPermissionUsers" (
  "A" text NOT NULL  REFERENCES "public"."FacultyPermission"("id") ON DELETE CASCADE,
  "B" text NOT NULL  REFERENCES "public"."User"("id") ON DELETE CASCADE
);

CREATE TABLE "public"."_InstitutePermissionUsers" (
  "A" text NOT NULL  REFERENCES "public"."InstitutePermission"("id") ON DELETE CASCADE,
  "B" text NOT NULL  REFERENCES "public"."User"("id") ON DELETE CASCADE
);

CREATE TABLE "public"."_MajorPermissionUsers" (
  "A" text NOT NULL  REFERENCES "public"."MajorPermission"("id") ON DELETE CASCADE,
  "B" text NOT NULL  REFERENCES "public"."User"("id") ON DELETE CASCADE
);

CREATE TABLE "public"."_NotePermissionUsers" (
  "A" text NOT NULL  REFERENCES "public"."NotePermission"("id") ON DELETE CASCADE,
  "B" text NOT NULL  REFERENCES "public"."User"("id") ON DELETE CASCADE
);

CREATE TABLE "public"."_NoteCommentPermissionUsers" (
  "A" text NOT NULL  REFERENCES "public"."NoteCommentPermission"("id") ON DELETE CASCADE,
  "B" text NOT NULL  REFERENCES "public"."User"("id") ON DELETE CASCADE
);

CREATE TABLE "public"."_NoteCommentThreadPermissionUsers" (
  "A" text NOT NULL  REFERENCES "public"."NoteCommentThreadPermission"("id") ON DELETE CASCADE,
  "B" text NOT NULL  REFERENCES "public"."User"("id") ON DELETE CASCADE
);

CREATE TABLE "public"."_NoteHighlightPermissionUsers" (
  "A" text NOT NULL  REFERENCES "public"."NoteHighlightPermission"("id") ON DELETE CASCADE,
  "B" text NOT NULL  REFERENCES "public"."User"("id") ON DELETE CASCADE
);

CREATE TABLE "public"."_PostPermissionUsers" (
  "A" text NOT NULL  REFERENCES "public"."PostPermission"("id") ON DELETE CASCADE,
  "B" text NOT NULL  REFERENCES "public"."User"("id") ON DELETE CASCADE
);

CREATE TABLE "public"."_PostCommentPermissionUsers" (
  "A" text NOT NULL  REFERENCES "public"."PostCommentPermission"("id") ON DELETE CASCADE,
  "B" text NOT NULL  REFERENCES "public"."User"("id") ON DELETE CASCADE
);

CREATE TABLE "public"."_SubjectPermissionUsers" (
  "A" text NOT NULL  REFERENCES "public"."SubjectPermission"("id") ON DELETE CASCADE,
  "B" text NOT NULL  REFERENCES "public"."User"("id") ON DELETE CASCADE
);

CREATE TABLE "public"."_SubjectInformationPermissionUsers" (
  "A" text NOT NULL  REFERENCES "public"."SubjectInformationPermission"("id") ON DELETE CASCADE,
  "B" text NOT NULL  REFERENCES "public"."User"("id") ON DELETE CASCADE
);

CREATE TABLE "public"."_SuggestionPermissionUsers" (
  "A" text NOT NULL  REFERENCES "public"."SuggestionPermission"("id") ON DELETE CASCADE,
  "B" text NOT NULL  REFERENCES "public"."User"("id") ON DELETE CASCADE
);

CREATE TABLE "public"."_UserPermissionUsers" (
  "A" text NOT NULL  REFERENCES "public"."User"("id") ON DELETE CASCADE,
  "B" text NOT NULL  REFERENCES "public"."UserPermission"("id") ON DELETE CASCADE
);

ALTER TABLE "public"."Department" ADD COLUMN "institute" text NOT NULL  REFERENCES "public"."Institute"("id") ON DELETE RESTRICT,
ADD COLUMN "leader" text NOT NULL  REFERENCES "public"."User"("id") ON DELETE RESTRICT;

ALTER TABLE "public"."Faculty" ADD COLUMN "institute" text NOT NULL  REFERENCES "public"."Institute"("id") ON DELETE RESTRICT;

ALTER TABLE "public"."Major" ADD COLUMN "faculty" text NOT NULL  REFERENCES "public"."Faculty"("id") ON DELETE RESTRICT;

ALTER TABLE "public"."Note" ADD COLUMN "subject" text NOT NULL  REFERENCES "public"."Subject"("id") ON DELETE RESTRICT;

ALTER TABLE "public"."NoteComment" ADD COLUMN "author" text NOT NULL  REFERENCES "public"."User"("id") ON DELETE RESTRICT,
ADD COLUMN "thread" text   REFERENCES "public"."NoteCommentThread"("id") ON DELETE SET NULL,
ADD COLUMN "threadReply" text   REFERENCES "public"."NoteCommentThread"("id") ON DELETE SET NULL;

ALTER TABLE "public"."NoteCommentThread" ADD COLUMN "note" text NOT NULL  REFERENCES "public"."Note"("id") ON DELETE RESTRICT;

ALTER TABLE "public"."NoteHighlight" ADD COLUMN "note" text NOT NULL  REFERENCES "public"."Note"("id") ON DELETE RESTRICT,
ADD COLUMN "user" text NOT NULL  REFERENCES "public"."User"("id") ON DELETE RESTRICT;

ALTER TABLE "public"."PasswordToken" ADD COLUMN "user" text NOT NULL  REFERENCES "public"."User"("id") ON DELETE RESTRICT;

ALTER TABLE "public"."Subject" ADD COLUMN "department" text NOT NULL  REFERENCES "public"."Department"("id") ON DELETE RESTRICT,
ADD COLUMN "language" text NOT NULL  REFERENCES "public"."Language"("id") ON DELETE RESTRICT;

ALTER TABLE "public"."SubjectInformation" ADD COLUMN "subject" text NOT NULL  REFERENCES "public"."Subject"("id") ON DELETE RESTRICT;

ALTER TABLE "public"."Suggestion" ADD COLUMN "approvedBy" text   REFERENCES "public"."User"("id") ON DELETE SET NULL,
ADD COLUMN "author" text NOT NULL  REFERENCES "public"."User"("id") ON DELETE RESTRICT,
ADD COLUMN "note" text NOT NULL  REFERENCES "public"."Note"("id") ON DELETE RESTRICT;

ALTER TABLE "public"."User" ADD COLUMN "ResetPasswordToken" text   REFERENCES "public"."ResetPasswordToken"("email") ON DELETE SET NULL,
ADD COLUMN "preferredLanguage" text   REFERENCES "public"."Language"("id") ON DELETE SET NULL,
ADD COLUMN "role" text NOT NULL  REFERENCES "public"."UserRole"("id") ON DELETE RESTRICT;

ALTER TABLE "public"."Post" ADD COLUMN "author" text NOT NULL  REFERENCES "public"."User"("id") ON DELETE RESTRICT,
ADD COLUMN "subject" text NOT NULL  REFERENCES "public"."Subject"("id") ON DELETE RESTRICT;

ALTER TABLE "public"."PostComment" ADD COLUMN "author" text NOT NULL  REFERENCES "public"."User"("id") ON DELETE RESTRICT,
ADD COLUMN "post" text NOT NULL  REFERENCES "public"."Post"("id") ON DELETE RESTRICT;

ALTER TABLE "public"."ActivationToken" ADD COLUMN "user" text NOT NULL  REFERENCES "public"."User"("id") ON DELETE RESTRICT;

ALTER TABLE "public"."DepartmentPermission" ADD COLUMN "object" text NOT NULL  REFERENCES "public"."Department"("id") ON DELETE RESTRICT;

ALTER TABLE "public"."FacultyPermission" ADD COLUMN "object" text NOT NULL  REFERENCES "public"."Faculty"("id") ON DELETE RESTRICT;

ALTER TABLE "public"."InstitutePermission" ADD COLUMN "object" text NOT NULL  REFERENCES "public"."Institute"("id") ON DELETE RESTRICT;

ALTER TABLE "public"."MajorPermission" ADD COLUMN "object" text NOT NULL  REFERENCES "public"."Major"("id") ON DELETE RESTRICT;

ALTER TABLE "public"."NoteCommentPermission" ADD COLUMN "object" text NOT NULL  REFERENCES "public"."NoteComment"("id") ON DELETE RESTRICT;

ALTER TABLE "public"."NoteCommentThreadPermission" ADD COLUMN "object" text NOT NULL  REFERENCES "public"."NoteCommentThread"("id") ON DELETE RESTRICT;

ALTER TABLE "public"."NoteHighlightPermission" ADD COLUMN "object" text NOT NULL  REFERENCES "public"."NoteHighlight"("id") ON DELETE RESTRICT;

ALTER TABLE "public"."NotePermission" ADD COLUMN "object" text NOT NULL  REFERENCES "public"."Note"("id") ON DELETE RESTRICT;

ALTER TABLE "public"."PostCommentPermission" ADD COLUMN "object" text NOT NULL  REFERENCES "public"."PostComment"("id") ON DELETE RESTRICT;

ALTER TABLE "public"."PostPermission" ADD COLUMN "object" text NOT NULL  REFERENCES "public"."Post"("id") ON DELETE RESTRICT;

ALTER TABLE "public"."SubjectPermission" ADD COLUMN "object" text NOT NULL  REFERENCES "public"."Subject"("id") ON DELETE RESTRICT;

ALTER TABLE "public"."SubjectInformationPermission" ADD COLUMN "object" text NOT NULL  REFERENCES "public"."SubjectInformation"("id") ON DELETE RESTRICT;

ALTER TABLE "public"."SuggestionPermission" ADD COLUMN "object" text NOT NULL  REFERENCES "public"."Suggestion"("id") ON DELETE RESTRICT;

ALTER TABLE "public"."UserPermission" ADD COLUMN "object" text NOT NULL  REFERENCES "public"."User"("id") ON DELETE RESTRICT;

CREATE UNIQUE INDEX "Department.id" ON "public"."Department"("id")

CREATE UNIQUE INDEX "Faculty.id" ON "public"."Faculty"("id")

CREATE UNIQUE INDEX "Institute.id" ON "public"."Institute"("id")

CREATE UNIQUE INDEX "Language.id" ON "public"."Language"("id")

CREATE UNIQUE INDEX "Language.code" ON "public"."Language"("code")

CREATE UNIQUE INDEX "Major.id" ON "public"."Major"("id")

CREATE UNIQUE INDEX "Note.id" ON "public"."Note"("id")

CREATE UNIQUE INDEX "NoteComment.id" ON "public"."NoteComment"("id")

CREATE UNIQUE INDEX "NoteCommentThread.id" ON "public"."NoteCommentThread"("id")

CREATE UNIQUE INDEX "NoteHighlight.id" ON "public"."NoteHighlight"("id")

CREATE UNIQUE INDEX "PasswordToken.id" ON "public"."PasswordToken"("id")

CREATE UNIQUE INDEX "PasswordToken.token" ON "public"."PasswordToken"("token")

CREATE UNIQUE INDEX "Subject.id" ON "public"."Subject"("id")

CREATE UNIQUE INDEX "Subject.code" ON "public"."Subject"("code")

CREATE UNIQUE INDEX "SubjectInformation.id" ON "public"."SubjectInformation"("id")

CREATE UNIQUE INDEX "Suggestion.id" ON "public"."Suggestion"("id")

CREATE UNIQUE INDEX "User.id" ON "public"."User"("id")

CREATE UNIQUE INDEX "User.email" ON "public"."User"("email")

CREATE UNIQUE INDEX "Post.id" ON "public"."Post"("id")

CREATE UNIQUE INDEX "PostComment.id" ON "public"."PostComment"("id")

CREATE UNIQUE INDEX "ActivationToken.id" ON "public"."ActivationToken"("id")

CREATE UNIQUE INDEX "ActivationToken.token" ON "public"."ActivationToken"("token")

CREATE UNIQUE INDEX "ResetPasswordToken.email" ON "public"."ResetPasswordToken"("email")

CREATE UNIQUE INDEX "ResetPasswordToken.token" ON "public"."ResetPasswordToken"("token")

CREATE UNIQUE INDEX "UserRole.id" ON "public"."UserRole"("id")

CREATE UNIQUE INDEX "DepartmentPermission.id" ON "public"."DepartmentPermission"("id")

CREATE UNIQUE INDEX "FacultyPermission.id" ON "public"."FacultyPermission"("id")

CREATE UNIQUE INDEX "InstitutePermission.id" ON "public"."InstitutePermission"("id")

CREATE UNIQUE INDEX "MajorPermission.id" ON "public"."MajorPermission"("id")

CREATE UNIQUE INDEX "NoteCommentPermission.id" ON "public"."NoteCommentPermission"("id")

CREATE UNIQUE INDEX "NoteCommentThreadPermission.id" ON "public"."NoteCommentThreadPermission"("id")

CREATE UNIQUE INDEX "NoteHighlightPermission.id" ON "public"."NoteHighlightPermission"("id")

CREATE UNIQUE INDEX "NotePermission.id" ON "public"."NotePermission"("id")

CREATE UNIQUE INDEX "PostCommentPermission.id" ON "public"."PostCommentPermission"("id")

CREATE UNIQUE INDEX "PostPermission.id" ON "public"."PostPermission"("id")

CREATE UNIQUE INDEX "SubjectPermission.id" ON "public"."SubjectPermission"("id")

CREATE UNIQUE INDEX "SubjectInformationPermission.id" ON "public"."SubjectInformationPermission"("id")

CREATE UNIQUE INDEX "SuggestionPermission.id" ON "public"."SuggestionPermission"("id")

CREATE UNIQUE INDEX "UserPermission.id" ON "public"."UserPermission"("id")

CREATE UNIQUE INDEX "_InstituteUsers_AB_unique" ON "public"."_InstituteUsers"("A","B")

CREATE UNIQUE INDEX "_MajorSubjects_AB_unique" ON "public"."_MajorSubjects"("A","B")

CREATE UNIQUE INDEX "_NoteAuthors_AB_unique" ON "public"."_NoteAuthors"("A","B")

CREATE UNIQUE INDEX "_NoteLikers_AB_unique" ON "public"."_NoteLikers"("A","B")

CREATE UNIQUE INDEX "_NoteCommentLikers_AB_unique" ON "public"."_NoteCommentLikers"("A","B")

CREATE UNIQUE INDEX "_SubjectTeachers_AB_unique" ON "public"."_SubjectTeachers"("A","B")

CREATE UNIQUE INDEX "_SubjectStudents_AB_unique" ON "public"."_SubjectStudents"("A","B")

CREATE UNIQUE INDEX "_SuggestionLikers_AB_unique" ON "public"."_SuggestionLikers"("A","B")

CREATE UNIQUE INDEX "_CommentLikers_AB_unique" ON "public"."_CommentLikers"("A","B")

CREATE UNIQUE INDEX "_PostLikers_AB_unique" ON "public"."_PostLikers"("A","B")

CREATE UNIQUE INDEX "_DepartmentPermissionUsers_AB_unique" ON "public"."_DepartmentPermissionUsers"("A","B")

CREATE UNIQUE INDEX "_FacultyPermissionUsers_AB_unique" ON "public"."_FacultyPermissionUsers"("A","B")

CREATE UNIQUE INDEX "_InstitutePermissionUsers_AB_unique" ON "public"."_InstitutePermissionUsers"("A","B")

CREATE UNIQUE INDEX "_MajorPermissionUsers_AB_unique" ON "public"."_MajorPermissionUsers"("A","B")

CREATE UNIQUE INDEX "_NotePermissionUsers_AB_unique" ON "public"."_NotePermissionUsers"("A","B")

CREATE UNIQUE INDEX "_NoteCommentPermissionUsers_AB_unique" ON "public"."_NoteCommentPermissionUsers"("A","B")

CREATE UNIQUE INDEX "_NoteCommentThreadPermissionUsers_AB_unique" ON "public"."_NoteCommentThreadPermissionUsers"("A","B")

CREATE UNIQUE INDEX "_NoteHighlightPermissionUsers_AB_unique" ON "public"."_NoteHighlightPermissionUsers"("A","B")

CREATE UNIQUE INDEX "_PostPermissionUsers_AB_unique" ON "public"."_PostPermissionUsers"("A","B")

CREATE UNIQUE INDEX "_PostCommentPermissionUsers_AB_unique" ON "public"."_PostCommentPermissionUsers"("A","B")

CREATE UNIQUE INDEX "_SubjectPermissionUsers_AB_unique" ON "public"."_SubjectPermissionUsers"("A","B")

CREATE UNIQUE INDEX "_SubjectInformationPermissionUsers_AB_unique" ON "public"."_SubjectInformationPermissionUsers"("A","B")

CREATE UNIQUE INDEX "_SuggestionPermissionUsers_AB_unique" ON "public"."_SuggestionPermissionUsers"("A","B")

CREATE UNIQUE INDEX "_UserPermissionUsers_AB_unique" ON "public"."_UserPermissionUsers"("A","B")
```

## Changes

```diff
diff --git datamodel.mdl datamodel.mdl
migration ..20191205143106-re-re-init
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,514 @@
+datasource postgres {
+  url      = env("POSTGRESQL_URL")
+  provider = "postgres"
+}
+
+generator photon {
+  provider = "photonjs"
+}
+
+enum NoteCategory {
+  NOTE
+  CASE_STUDY
+}
+
+enum UserRoleType {
+  USER
+  ADMIN
+  PROFESSOR
+}
+
+model Department {
+  id          String                 @default(cuid()) @id @unique
+  name        String
+  description String
+  leader      User                   @relation(name: "DepartmentLeader")
+  subjects    Subject[]              @relation(name: "DepartmentSubjects")
+  institute   Institute              @relation(name: "DepartmentInstitute")
+  permissions DepartmentPermission[] @relation(name: "DepartmentPermissions")
+  createdAt   DateTime               @default(now())
+  updatedAt   DateTime               @updatedAt
+  deletedAt   DateTime?
+}
+
+model Faculty {
+  id          String              @default(cuid()) @id @unique
+  name        String
+  institute   Institute           @relation(name: "InstituteFaculties")
+  majors      Major[]             @relation(name: "FacultyMajors")
+  permissions FacultyPermission[] @relation(name: "FacultyPermissions")
+  createdAt   DateTime            @default(now())
+  updatedAt   DateTime            @updatedAt
+  deletedAt   DateTime?
+}
+
+model Institute {
+  id          String                @default(cuid()) @id @unique
+  name        String
+  faculties   Faculty[]             @relation(name: "InstituteFaculties")
+  departments Department[]          @relation(name: "DepartmentInstitute")
+  users       User[]                @relation(name: "InstituteUsers")
+  permissions InstitutePermission[] @relation(name: "InstitutePermissions")
+  createdAt   DateTime              @default(now())
+  updatedAt   DateTime              @updatedAt
+  deletedAt   DateTime?
+}
+
+model Language {
+  id       String    @default(cuid()) @id @unique
+  code     String    @unique
+  name     String
+  users    User[]    @relation(name: "UserPrefferedLanguage")
+  subjects Subject[] @relation(name: "SubjectLanguage")
+}
+
+model Major {
+  id          String            @default(cuid()) @id @unique
+  name        String
+  faculty     Faculty           @relation(name: "FacultyMajors")
+  subjects    Subject[]         @relation(name: "MajorSubjects")
+  permissions MajorPermission[] @relation(name: "MajorPermissions")
+  createdAt   DateTime          @default(now())
+  updatedAt   DateTime          @updatedAt
+  deletedAt   DateTime?
+}
+
+model Note {
+  id             String              @default(cuid()) @id @unique
+  content        String
+  contentHTML    String
+  title          String
+  number         Int
+  description    String?
+  noteCategory   NoteCategory
+  suggestions    Suggestion[]        @relation(name: "NoteSuggestions")
+  commentThreads NoteCommentThread[] @relation(name: "NoteCommentThreads")
+  authors        User[]              @relation(name: "NoteAuthors")
+  likers         User[]              @relation(name: "NoteLikers")
+  highlights     NoteHighlight[]     @relation(name: "NoteHighlights")
+  subject        Subject             @relation(name: "SubjectNotes")
+  permissions    NotePermission[]    @relation(name: "NotePermissions")
+  createdAt      DateTime            @default(now())
+  updatedAt      DateTime            @updatedAt
+  deletedAt      DateTime?
+}
+
+model NoteComment {
+  id          String                  @default(cuid()) @id @unique
+  content     String
+  author      User                    @relation(name: "NoteCommentAuthor")
+  likers      User[]                  @relation(name: "NoteCommentLikers")
+  thread      NoteCommentThread?      @relation(name: "NoteCommentThreadComment")
+  threadReply NoteCommentThread?      @relation(name: "NoteCommentThreadReplies")
+  permissions NoteCommentPermission[] @relation(name: "NoteCommentPermissions")
+  createdAt   DateTime                @default(now())
+  updatedAt   DateTime                @updatedAt
+  deletedAt   DateTime?
+}
+
+model NoteCommentThread {
+  id          String                        @default(cuid()) @id @unique
+  position    String
+  comment     NoteComment                   @relation(name: "NoteCommentThreadComment")
+  replies     NoteComment[]                 @relation(name: "NoteCommentThreadReplies")
+  note        Note                          @relation(name: "NoteCommentThreads")
+  permissions NoteCommentThreadPermission[] @relation(name: "NoteCommentThreadPermissions")
+  createdAt   DateTime                      @default(now())
+  updatedAt   DateTime                      @updatedAt
+  deletedAt   DateTime?
+}
+
+model NoteHighlight {
+  id          String                    @default(cuid()) @id @unique
+  position    String
+  user        User                      @relation(name: "UserNoteHighlights")
+  note        Note                      @relation(name: "NoteHighlights")
+  permissions NoteHighlightPermission[] @relation(name: "NoteHighlightPermissions")
+  createdAt   DateTime                  @default(now())
+  updatedAt   DateTime                  @updatedAt
+  deletedAt   DateTime?
+}
+
+model PasswordToken {
+  id        String    @default(cuid()) @id @unique
+  token     String    @unique
+  user      User      @relation(name: "PasswordTokenUser")
+  createdAt DateTime  @default(now())
+  updatedAt DateTime  @updatedAt
+  deletedAt DateTime?
+}
+
+model Subject {
+  id           String               @default(cuid()) @id @unique
+  code         String               @unique
+  name         String
+  description  String
+  department   Department           @relation(name: "DepartmentSubjects")
+  teachers     User[]               @relation(name: "SubjectTeachers")
+  students     User[]               @relation(name: "SubjectStudents")
+  informations SubjectInformation[] @relation(name: "SubjectInformations")
+  notes        Note[]               @relation(name: "SubjectNotes")
+  posts        Post[]               @relation(name: "SubjectPosts")
+  language     Language             @relation(name: "SubjectLanguage")
+  majors       Major[]              @relation(name: "MajorSubjects")
+  permissions  SubjectPermission[]  @relation(name: "SubjectPermissions")
+  createdAt    DateTime             @default(now())
+  updatedAt    DateTime             @updatedAt
+  deletedAt    DateTime?
+}
+
+model SubjectInformation {
+  id          String                         @default(cuid()) @id @unique
+  title       String
+  subtitle    String?
+  content     String
+  subject     Subject                        @relation(name: "SubjectInformations")
+  permissions SubjectInformationPermission[] @relation(name: "SubjectInformationPermissions")
+  createdAt   DateTime                       @default(now())
+  updatedAt   DateTime                       @updatedAt
+  deletedAt   DateTime?
+}
+
+model Suggestion {
+  id          String                 @default(cuid()) @id @unique
+  delta       String
+  approvedAt  DateTime?
+  rejectedAt  DateTime?
+  likers      User[]                 @relation(name: "SuggestionLikers")
+  approvedBy  User?                  @relation(name: "SuggestionApprovedBy")
+  note        Note                   @relation(name: "NoteSuggestions")
+  author      User                   @relation(name: "SuggestionAuthor")
+  permissions SuggestionPermission[] @relation(name: "SuggestionPermissions")
+  createdAt   DateTime               @default(now())
+  updatedAt   DateTime               @updatedAt
+  deletedAt   DateTime?
+}
+
+model User {
+  id                  String              @default(cuid()) @id @unique
+  email               String              @unique
+  password            String
+  profilePictureURL   String?
+  firstName           String
+  lastName            String
+  phoneNumber         String?
+  identifier          String
+  position            String?
+  activationToken     ActivationToken?
+  ResetPasswordToken  ResetPasswordToken?
+  isActive            Boolean             @default(false)
+  role                UserRole            @relation(name: "UserRole")
+  notes               Note[]              @relation(name: "NoteAuthors")
+  noteHighlights      NoteHighlight[]     @relation(name: "UserNoteHighlights")
+  suggestions         Suggestion[]        @relation(name: "SuggestionAuthor")
+  approvedSuggestions Suggestion[]        @relation(name: "SuggestionApprovedBy")
+  teachedSubjects     Subject[]           @relation(name: "SubjectTeachers")
+  studiedSubjects     Subject[]           @relation(name: "SubjectStudents")
+  likedNotes          Note[]              @relation(name: "NoteLikers")
+  noteComments        NoteComment[]       @relation(name: "NoteCommentAuthor")
+  postComments        PostComment[]       @relation(name: "PostCommentAuthor")
+  likedNoteComments   NoteComment[]       @relation(name: "NoteCommentLikers")
+  likedPostComments   PostComment[]       @relation(name: "CommentLikers")
+  likedPosts          Post[]              @relation(name: "PostLikers")
+  posts               Post[]              @relation(name: "PostAuthor")
+  likedSuggestions    Suggestion[]        @relation(name: "SuggestionLikers")
+  passwordToken       PasswordToken?      @relation(name: "PasswordTokenUser")
+  departments         Department[]        @relation(name: "DepartmentLeader")
+  institutes          Institute[]         @relation(name: "InstituteUsers")
+  preferredLanguage   Language?           @relation(name: "UserPrefferedLanguage")
+
+  departmentPermissions         DepartmentPermission[]         @relation(name: "DepartmentPermissionUsers")
+  facultyPermissions            FacultyPermission[]            @relation(name: "FacultyPermissionUsers")
+  institutePermissions          InstitutePermission[]          @relation(name: "InstitutePermissionUsers")
+  majorPermissions              MajorPermission[]              @relation(name: "MajorPermissionUsers")
+  notePermissions               NotePermission[]               @relation(name: "NotePermissionUsers")
+  noteCommentPermissions        NoteCommentPermission[]        @relation(name: "NoteCommentPermissionUsers")
+  noteCommentThreadPermissions  NoteCommentThreadPermission[]  @relation(name: "NoteCommentThreadPermissionUsers")
+  noteHighlightPermissions      NoteHighlightPermission[]      @relation(name: "NoteHighlightPermissionUsers")
+  postPermissions               PostPermission[]               @relation(name: "PostPermissionUsers")
+  postCommentPermissions        PostCommentPermission[]        @relation(name: "PostCommentPermissionUsers")
+  subjectPermissions            SubjectPermission[]            @relation(name: "SubjectPermissionUsers")
+  subjectInformationPermissions SubjectInformationPermission[] @relation(name: "SubjectInformationPermissionUsers")
+  suggestionPermissions         SuggestionPermission[]         @relation(name: "SuggestionPermissionUsers")
+  userPermissions               UserPermission[]               @relation(name: "UserPermissionUsers")
+  permissions                   UserPermission[]               @relation(name: "UserPermissions")
+
+  createdAt DateTime  @default(now())
+  updatedAt DateTime  @updatedAt
+  deletedAt DateTime?
+}
+
+model Post {
+  id          String           @default(cuid()) @id @unique
+  content     String
+  author      User             @relation(name: "PostAuthor")
+  subject     Subject          @relation(name: "SubjectPosts")
+  likers      User[]           @relation(name: "PostLikers")
+  comments    PostComment[]    @relation(name: "PostPostComments")
+  permissions PostPermission[] @relation(name: "PostPermissions")
+  createdAt   DateTime         @default(now())
+  updatedAt   DateTime         @updatedAt
+  deletedAt   DateTime?
+}
+
+model PostComment {
+  id          String                  @default(cuid()) @id @unique
+  content     String
+  author      User                    @relation(name: "PostCommentAuthor")
+  post        Post                    @relation(name: "PostPostComments")
+  likers      User[]                  @relation(name: "CommentLikers")
+  permissions PostCommentPermission[] @relation(name: "PostCommentPermissions")
+  createdAt   DateTime                @default(now())
+  updatedAt   DateTime                @updatedAt
+  deletedAt   DateTime?
+}
+
+model ActivationToken {
+  id        String   @default(cuid()) @id @unique
+  user      User
+  token     String   @unique
+  createdAt DateTime @default(now())
+}
+
+model ResetPasswordToken {
+  email     String   @default(cuid()) @id @unique
+  token     String   @unique
+  createdAt DateTime @default(now())
+}
+
+model UserRole {
+  id        String       @default(cuid()) @id @unique
+  name      String
+  type      UserRoleType
+  users     User[]       @relation(name: "UserRole")
+  createdAt DateTime     @default(now())
+  updatedAt DateTime     @updatedAt
+  deletedAt DateTime?
+}
+
+model DepartmentPermission {
+  id        String                   @default(cuid()) @id @unique
+  type      DepartmentPermissionType
+  users     User[]                   @relation(name: "DepartmentPermissionUsers")
+  object    Department               @relation(name: "DepartmentPermissions")
+  createdAt DateTime                 @default(now())
+  updatedAt DateTime                 @updatedAt
+  deletedAt DateTime?
+}
+
+enum DepartmentPermissionType {
+  UPDATE_DEPARTMENT
+  READ_DEPARTMENT
+  DELETE_DEPARTMENT
+  CREATE_SUBJECT
+}
+
+model FacultyPermission {
+  id        String                @default(cuid()) @id @unique
+  type      FacultyPermissionType
+  users     User[]                @relation(name: "FacultyPermissionUsers")
+  object    Faculty               @relation(name: "FacultyPermissions")
+  createdAt DateTime              @default(now())
+  updatedAt DateTime              @updatedAt
+  deletedAt DateTime?
+}
+
+enum FacultyPermissionType {
+  UPDATE_FACULTY
+  READ_FACULTY
+  DELETE_FACULTY
+}
+
+model InstitutePermission {
+  id        String                  @default(cuid()) @id @unique
+  type      InstitutePermissionType
+  users     User[]                  @relation(name: "InstitutePermissionUsers")
+  object    Institute               @relation(name: "InstitutePermissions")
+  createdAt DateTime                @default(now())
+  updatedAt DateTime                @updatedAt
+  deletedAt DateTime?
+}
+
+enum InstitutePermissionType {
+  UPDATE_INSTITUTE
+  DELETE_INSTITUTE
+  CREATE_DEPARTMENT
+}
+
+model MajorPermission {
+  id        String              @default(cuid()) @id @unique
+  type      MajorPermissionType
+  users     User[]              @relation(name: "MajorPermissionUsers")
+  object    Major               @relation(name: "MajorPermissions")
+  createdAt DateTime            @default(now())
+  updatedAt DateTime            @updatedAt
+  deletedAt DateTime?
+}
+
+enum MajorPermissionType {
+  UPDATE_MAJOR
+  READ_MAJOR
+  DELETE_MAJOR
+}
+
+model NoteCommentPermission {
+  id        String                    @default(cuid()) @id @unique
+  type      NoteCommentPermissionType
+  users     User[]                    @relation(name: "NoteCommentPermissionUsers")
+  object    NoteComment               @relation(name: "NoteCommentPermissions")
+  createdAt DateTime                  @default(now())
+  updatedAt DateTime                  @updatedAt
+  deletedAt DateTime?
+}
+
+enum NoteCommentPermissionType {
+  UPDATE_NOTE_COMMENT
+  DELETE_NOTE_COMMENT
+}
+
+model NoteCommentThreadPermission {
+  id        String                          @default(cuid()) @id @unique
+  type      NoteCommentThreadPermissionType
+  users     User[]                          @relation(name: "NoteCommentThreadPermissionUsers")
+  object    NoteCommentThread               @relation(name: "NoteCommentThreadPermissions")
+  createdAt DateTime                        @default(now())
+  updatedAt DateTime                        @updatedAt
+  deletedAt DateTime?
+}
+
+enum NoteCommentThreadPermissionType {
+  DELETE_NOTE_COMMENT_THREAD
+}
+
+model NoteHighlightPermission {
+  id        String                      @default(cuid()) @id @unique
+  type      NoteHighlightPermissionType
+  users     User[]                      @relation(name: "NoteHighlightPermissionUsers")
+  object    NoteHighlight               @relation(name: "NoteHighlightPermissions")
+  createdAt DateTime                    @default(now())
+  updatedAt DateTime                    @updatedAt
+  deletedAt DateTime?
+}
+
+enum NoteHighlightPermissionType {
+  UPDATE_NOTE_HIGHLIGHT
+  DELETE_NOTE_HIGHLIGHT
+}
+
+model NotePermission {
+  id        String             @default(cuid()) @id @unique
+  type      NotePermissionType
+  users     User[]             @relation(name: "NotePermissionUsers")
+  object    Note               @relation(name: "NotePermissions")
+  createdAt DateTime           @default(now())
+  updatedAt DateTime           @updatedAt
+  deletedAt DateTime?
+}
+
+enum NotePermissionType {
+  READ_NOTE
+  UPDATE_NOTE
+  DELETE_NOTE
+  CREATE_SUGGESTION
+}
+
+model PostCommentPermission {
+  id        String                    @default(cuid()) @id @unique
+  type      PostCommentPermissionType
+  users     User[]                    @relation(name: "PostCommentPermissionUsers")
+  object    PostComment               @relation(name: "PostCommentPermissions")
+  createdAt DateTime                  @default(now())
+  updatedAt DateTime                  @updatedAt
+  deletedAt DateTime?
+}
+
+enum PostCommentPermissionType {
+  UPDATE_POSTCOMMENT
+  DELETE_POSTCOMMENT
+  READ_POSTCOMMENT
+}
+
+model PostPermission {
+  id        String             @default(cuid()) @id @unique
+  type      PostPermissionType
+  users     User[]             @relation(name: "PostPermissionUsers")
+  object    Post               @relation(name: "PostPermissions")
+  createdAt DateTime           @default(now())
+  updatedAt DateTime           @updatedAt
+  deletedAt DateTime?
+}
+
+enum PostPermissionType {
+  CREATE_POSTCOMMENT
+  UPDATE_POST
+  DELETE_POST
+  READ_POST
+}
+
+model SubjectPermission {
+  id        String                @default(cuid()) @id @unique
+  type      SubjectPermissionType
+  users     User[]                @relation(name: "SubjectPermissionUsers")
+  object    Subject               @relation(name: "SubjectPermissions")
+  createdAt DateTime              @default(now())
+  updatedAt DateTime              @updatedAt
+  deletedAt DateTime?
+}
+
+enum SubjectPermissionType {
+  CREATE_POST
+  CREATE_SUBJECT_INFORMATION
+  UPDATE_SUBJECT
+  DELETE_SUBJECT
+  READ_SUBJECT
+  CREATE_NOTE
+}
+
+model SubjectInformationPermission {
+  id        String                           @default(cuid()) @id @unique
+  type      SubjectInformationPermissionType
+  users     User[]                           @relation(name: "SubjectInformationPermissionUsers")
+  object    SubjectInformation               @relation(name: "SubjectInformationPermissions")
+  createdAt DateTime                         @default(now())
+  updatedAt DateTime                         @updatedAt
+  deletedAt DateTime?
+}
+
+enum SubjectInformationPermissionType {
+  READ_SUBJECT_INFORMATION
+  UPDATE_SUBJECT_INFORMATION
+  DELETE_SUBJECT_INFORMATION
+}
+
+model SuggestionPermission {
+  id        String                   @default(cuid()) @id @unique
+  type      SuggestionPermissionType
+  users     User[]                   @relation(name: "SuggestionPermissionUsers")
+  object    Suggestion               @relation(name: "SuggestionPermissions")
+  createdAt DateTime                 @default(now())
+  updatedAt DateTime                 @updatedAt
+  deletedAt DateTime?
+}
+
+enum SuggestionPermissionType {
+  UPDATE_SUGGESTION
+  READ_SUGGESTION
+  DELETE_SUGGESTION
+  APPROVE_SUGGESTION
+  REJECT_SUGGESTION
+}
+
+model UserPermission {
+  id        String             @default(cuid()) @id @unique
+  type      UserPermissionType
+  users     User[]             @relation(name: "UserPermissionUsers")
+  object    User               @relation(name: "UserPermissions")
+  createdAt DateTime           @default(now())
+  updatedAt DateTime           @updatedAt
+  deletedAt DateTime?
+}
+
+enum UserPermissionType {
+  UPDATE_USER
+  DELETE_USER
+}
```

## Photon Usage

You can use a specific Photon built for this migration (20191205143106-re-re-init)
in your `before` or `after` migration script like this:

```ts
import Photon from '@generated/photon/20191205143106-re-re-init'

const photon = new Photon()

async function main() {
  const result = await photon.users()
  console.dir(result, { depth: null })
}

main()

```
